<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>หน้าแรก - MARKMAN TRADER</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="favicon.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;700&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="trader-theme">
  <nav>
    <div class="burger-menu" tabindex="0" aria-label="Show Menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <div class="nav-underline"></div>
    <div class="nav-links">
      <a href="index.html">หน้าแรก</a>
      <a href="about.html">ประวัติ</a>
      <a href="portfolio.html">ผลงาน</a>
      <a href="tools.html">เครื่องมือ</a>
      <a href="info.html">ข้อมูล</a>
      <a href="contact.html">ติดต่อ</a>
      <a href="graph.html">กราฟ</a>
      <a href="news.html">ข่าว</a>
    </div>
  </nav>
  <div class="header-logo">
    <span class="logo-bg-custom">
      <img src="images/logo.png" alt="MARKMAN TRADER Logo">
    </span>
    <span>MARKMAN TRADER</span>
  </div>
  <div class="container">
    <h2>ยินดีต้อนรับสู่ MARKMAN TRADER</h2>
    <p>นี่คือหน้าแรก ตัวอย่างการวางโครงสร้าง nav แบบใหม่</p>
  </div>
  <!-- Sound & JS -->
  <audio id="nav-sound" preload="auto">
    <source src="https://cdn.pixabay.com/audio/2022/10/16/audio_12c7112c43.mp3" type="audio/mp3">
  </audio>
  <script>
(function() {
  const nav = document.querySelector('nav');
  const burger = nav.querySelector('.burger-menu');
  const navLinks = nav.querySelector('.nav-links');
  burger.onclick = function() {
    nav.classList.toggle('open');
    burger.classList.toggle('open');
    document.body.onclick = function(e){
      if(!nav.contains(e.target)) {
        nav.classList.remove('open');
        burger.classList.remove('open');
      }
    }
  };
  burger.onkeydown = (e)=>{if(e.key==='Enter'||e.key===' '){burger.click()}};
  const underline = nav.querySelector('.nav-underline');
  const links = [...nav.querySelectorAll('.nav-links a')];
  let barLoop = true, loopTimer;
  function setBar(el) {
    if (!el) { underline.style.opacity = 0; return; }
    underline.style.width = el.offsetWidth + "px";
    underline.style.left = (el.offsetLeft) + "px";
    underline.style.opacity = 1;
  }
  function barAutoLoop() {
    if (!barLoop) return;
    let i=0, dir=1;
    loopTimer = setInterval(()=>{
      if(!barLoop) return;
      setBar(links[i]);
      if(dir===1 && i===links.length-1) dir=-1;
      else if(dir===-1 && i===0) dir=1;
      i+=dir;
    }, 1100);
  }
  const path = window.location.pathname.split('/').pop();
  let found = false;
  links.forEach(a=>{
    a.classList.remove('active');
    if (!found && a.getAttribute('href') && a.getAttribute('href').indexOf(path)!==-1) {
      a.classList.add('active');
      found = true;
    }
  });
  setTimeout(()=>{
    setBar(nav.querySelector('.nav-links a.active') || links[0]);
    barAutoLoop();
  }, 180);
  links.forEach(link=>{
    link.addEventListener('mouseenter', ()=>{
      clearInterval(loopTimer);
      barLoop=false;
      setBar(link);
    });
    link.addEventListener('mouseleave', ()=>{
      barLoop=true;
      barAutoLoop();
      setBar(nav.querySelector('.nav-links a.active') || links[0]);
    });
    link.addEventListener('focus', ()=>setBar(link));
    link.addEventListener('blur', ()=>setBar(nav.querySelector('.nav-links a.active') || links[0]));
    link.addEventListener('click', ()=>{
      try{ document.getElementById('nav-sound').currentTime=0; document.getElementById('nav-sound').play(); }catch(e){}
    });
    link.addEventListener('mousedown', ()=>{
      link.style.transform = 'scale(0.94)';
    });
    link.addEventListener('mouseup', ()=>{
      link.style.transform = '';
    });
    link.addEventListener('mouseleave', ()=>{
      link.style.transform = '';
    });
  });
  links.forEach(link=>{
    link.addEventListener('click', ()=>{
      if(window.innerWidth < 900) {
        nav.classList.remove('open');
        burger.classList.remove('open');
      }
    });
  });
})();
  </script>
</body>
</html>
